# PROPOSALS â€” Architectural Surgery Report
> Generated by `/sculptor` on 2026-02-23
> Based on: PROJECT_CONTEXT_MAP.md (2026-02-23, fresh scan)
> Git: last commit `aae9794` (Rounds 1+2+3 complete)
> Intelligence: 5-lens analysis + WebSearch (Lens 3)
> Status: Fresh context âœ…

---

## Summary

Rounds 1, 2, 3 are complete. The framework now has a working skills triangle (/ctx + /sculptor), installers that converge on 3 questions, Cursor â‰¥0.45 support, and PROJECT_IDEOLOGY.md as the "soul document." What remains is a cleanup sprint and one strategic gap: /arbiter (the third leg of the triangle is missing).

The project has accumulated 3 categories of dead weight since early development:
1. **23 legacy scripts** in scripts/ (only 4-5 are active)
2. **Outdated metadata** in config.json (dead schema fields)
3. **Runtime artifacts** in the distributable (npm-templates)

These don't break anything today â€” but they signal technical debt to contributors, create confusion for new sessions loading the codebase, and slow down the sculptor/arbiter when scanning the project.

**Market finding (WebSearch 2026-02-23):** The space now has vibe-rules, agent-rules (steipete), cursorrules-to-claudemd, and others â€” all point tools. We're the only "AI Workflow OS": install + rules + hooks + security + session discipline + skills triangle + ideology. That's the positioning story. But /arbiter is the piece that no competitor has, and it's missing.

**Proposals:** 8 total (P1: 3 critical | P2: 3 important | P3: 2 strategic)

---

## P1 â€” Critical (do first, small effort, high clarity gain)

### P1.1: SCRIPTS PURGE â€” Remove ~20 legacy scripts

**Why:**
`scripts/` has 28 files. Active (confirmed): `install.sh`, `pre-commit`, `post-push.sh`, `sync-rules.sh`.
The other 24 are artifacts from before the framework was simplified:
- `install.ps1`, `setup.sh`, `setup.ps1` â€” replaced by `bin/cli.js` NPX wizard
- `pre-commit.js`, `pre-commit.ps1`, `pre-commit-lint.sh` â€” replaced by unified `scripts/pre-commit`
- `ai-protection.js`, `ai-protection.ps1`, `ai-protection.sh` â€” absorbed into `pre-commit`
- `ai-session.sh`, `session-init.sh` â€” replaced by `post-push.sh` session anchor (Task 7)
- `context-diff.sh`, `estimate-tokens.sh`, `token-log.sh`, `token-status.sh`, `token-status.ps1` â€” legacy token utilities (presets.json replaced the whole layer)
- `migrate-to-hub.sh`, `cleanup-root.sh` â€” one-time migration scripts
- `check-links.sh`, `seo-check.sh`, `setup-lint.sh`, `validate-setup.sh`, `validate-structure.sh`, `verify-templates.sh` â€” dev utilities that don't belong in distributed project

**What exactly:**
Delete everything except: `install.sh`, `pre-commit`, `post-push.sh`, `sync-rules.sh`

```
DELETE:
  scripts/install.ps1       scripts/ai-protection.js
  scripts/setup.sh          scripts/ai-protection.ps1
  scripts/setup.ps1         scripts/ai-protection.sh
  scripts/setup-lint.sh     scripts/ai-session.sh
  scripts/pre-commit.js     scripts/session-init.sh
  scripts/pre-commit.ps1    scripts/context-diff.sh
  scripts/pre-commit-lint.sh scripts/estimate-tokens.sh
  scripts/migrate-to-hub.sh scripts/token-log.sh
  scripts/cleanup-root.sh   scripts/token-status.sh
  scripts/check-links.sh    scripts/token-status.ps1
  scripts/seo-check.sh      scripts/validate-setup.sh
  scripts/validate-structure.sh scripts/verify-templates.sh
```

**Impact:** High â€” removes 24 dead files, scripts/ becomes legible at a glance
**Effort:** Small â‰ˆ 30 min (git rm + test that hooks still work)
**Breaking:** ðŸŸ¢ Non-breaking â€” no active code references these files
**ROADMAP candidate:** Yes â†’ "Task 14: Scripts purge sprint"

---

### P1.2: CONFIG.JSON CLEANUP â€” Remove dead schema fields

**Why:**
`config.json` has 3 dead fields from the old token management schema (pre-Task 6):
1. `token_budget` block â€” entire section is dead. `presets.json` is now the source of truth for all plan-specific limits. This block contradicts the new architecture.
2. `config_version: "2.1"` â€” should be `"2.2"` after Task 4 (presets refactor) to signal the schema change.
3. `modules: []` â€” empty array with no documented meaning, never used.

Current state creates a silent confusion: a new developer reading config.json sees `daily_limit: 200000` in token_budget and assumes it's active â€” but it's completely ignored.

**What exactly:**
```json
// REMOVE this entire block:
"token_budget": {
  "daily_limit": 200000,
  "monthly_limit": 6000000,
  "auto_approve_thresholds": { ... }
},

// REMOVE:
"modules": [],

// CHANGE:
"config_version": "2.1"  â†’  "2.2"
```

Mirror the same cleanup in `npm-templates/.ai/config.json`.

**Impact:** Medium â€” eliminates dead schema confusion, makes config.json honest
**Effort:** Small â‰ˆ 15 min
**Breaking:** ðŸŸ¢ Non-breaking â€” dead fields are ignored by all current code
**ROADMAP candidate:** Fold into "Task 14: Cleanup sprint"

---

### P1.3: RUNTIME FILES OUT OF NPM-TEMPLATES â€” Delete generated artifacts

**Why:**
`npm-templates/.ai/` contains two files that should NEVER be in the distributable:
- `token-limits.json` â€” user-generated runtime file (840 lines, old schema)
- `session-log.json` â€” user session data

These get copied into users' projects at install time, potentially overwriting their own session data. They also burden the distributable with 840+ lines of content that's been superseded by `presets.json`.

Installer (`bin/cli.js` + `install.sh`) never intentionally copies these files â€” they snuck into `npm-templates/` during early development before the installer got smart about what to copy.

**What exactly:**
```
DELETE:
  npm-templates/.ai/token-limits.json
  npm-templates/.ai/session-log.json
```

Verify that `bin/cli.js` and `install.sh` do NOT copy these files (they shouldn't â€” but verify).

**Impact:** High â€” prevents accidental overwrite of user session data at install
**Effort:** Small â‰ˆ 10 min
**Breaking:** ðŸŸ¢ Non-breaking â€” installer never reads these files
**ROADMAP candidate:** Fold into "Task 14: Cleanup sprint"

---

## P2 â€” Important (address soon)

### P2.1: DELETE QUICK_CONTEXT.md â€” Outdated single-file description

**Why:**
`QUICK_CONTEXT.md` exists in the project root and describes the framework workflow â€” but it was written before:
- `/ctx` skill (PROJECT_CONTEXT_MAP.md replaces it)
- `/sculptor` + `/arbiter` skills triangle
- PROJECT_IDEOLOGY.md
- Token system v4.0 (presets.json)

A new contributor sees QUICK_CONTEXT.md and gets an outdated mental model. The file contradicts PROJECT_CONTEXT_MAP.md (fresh, 2026-02-23) and PROJECT_IDEOLOGY.md (new, created this session). Two files describing the project = confusion.

**What exactly:**
Delete `QUICK_CONTEXT.md` from root.
Verify `CLAUDE.md` and `AGENTS.md` don't reference it. If they do, update references to point to `PROJECT_CONTEXT_MAP.md`.

**Impact:** Medium â€” removes contradictory mental model from project root
**Effort:** Small â‰ˆ 15 min
**Breaking:** ðŸŸ¢ Non-breaking â€” no code imports this file
**ROADMAP candidate:** Fold into "Task 14: Cleanup sprint"

---

### P2.2: CHANGELOG CATCH-UP â€” Add Round 2 + Round 3 entries

**Why:**
`CHANGELOG.md` has no entries for:
- Round 2 â€” Task 12 (Cursor â‰¥0.45 .mdc format)
- Round 3 â€” Task 13 (Skills triangle: ideology + WebSearch + think harder)
- Round 3 â€” Task 10 (Wizard simplification: 8â†’3 questions)

This is a gap in historical record. For an npm-published package, CHANGELOG.md is a first-class document â€” users check it before upgrading. The gap signals abandoned maintenance.

**What exactly:**
Add entries following the existing Keep a Changelog format:

```markdown
## [Unreleased] â€” 2026-02-23

### Round 3
- feat(task-13): skill triangle enhancement â€” ideology + WebSearch + think harder
- feat(task-10): simplify installer wizard â€” 8 questions â†’ 3
- feat(task-12): add Cursor â‰¥0.45 rules format (.cursor/rules/ai-workflow.mdc)

### Round 2
- feat(task-12): Cursor migration to .mdc format with YAML frontmatter
```

**Impact:** Medium â€” historical integrity, npm user expectations
**Effort:** Small â‰ˆ 20 min
**Breaking:** ðŸŸ¢ Non-breaking
**ROADMAP candidate:** Fold into "Task 14: Cleanup sprint"

---

### P2.3: AGENTS.md UPDATE â€” Reflect current workflow

**Why:**
`AGENTS.md` is the universal entry point for any AI without tool-specific rules.
Based on the architecture history, it was likely written before:
- Skills triangle (/ctx, /sculptor, /arbiter)
- PROJECT_IDEOLOGY.md concept
- New session anchor workflow

New contributors and AI tools that land on AGENTS.md get an outdated onboarding path. The file should be the "single page that explains everything about working with this project using AI."

**What exactly:**
Read current `AGENTS.md` â†’ update to include:
1. `//START` â†’ points to PROJECT_IDEOLOGY.md + PROJECT_CONTEXT_MAP.md
2. Skills triangle: `/ctx` (Reality) â†’ `/sculptor` (Clarity) â†’ `/arbiter` (Order) â€” with one-line description each
3. Session anchor: post-push updates PROJECT_CONTEXT_MAP.md with `## ðŸ“ Last Push`
4. Remove any references to removed features (Windsurf, Continue.dev)

**Impact:** Medium â€” new contributors + cross-AI compatibility
**Effort:** Small â‰ˆ 30-45 min
**Breaking:** ðŸŸ¢ Non-breaking â€” additive
**ROADMAP candidate:** Yes â†’ separate small task or fold into Task 14

---

## P3 â€” Strategic (shape the future)

### P3.1: /ARBITER â€” Complete the Triangle (HIGHEST STRATEGIC PRIORITY)

**Why:**
The skills triangle has two working legs: `/ctx` (Reality mapping) + `/sculptor` (Architectural analysis).
`/arbiter` (Execution planning + Safety gating) is the third leg â€” defined in ROADMAP as Task 8, present as a stub skill, but not implemented.

**Market context (WebSearch 2026-02-23):**
Competitors:
- **vibe-rules**: copies rules. No planning, no safety.
- **agent-rules** (steipete): GitHub-only, no installer, no skill layer.
- **cursorrules**: Cursor-specific, no multi-tool.
- **cursorrules-to-claudemd**: converter only.

None have anything resembling "execution planning + safety gating." This is our moat.

The Builder.io Agent Skills standard (emerging 2026) standardizes skills as "a folder with definition.md + optional scripts/templates." Our skills already fit this pattern. /arbiter would cement us as the reference implementation.

**What exactly:**
Implement `/arbiter` skill based on ROADMAP Task 8 spec:
- Reads PROPOSALS.md output
- Applies risk scoring (reversibility, blast radius, dependencies)
- Detects ideology conflicts (does this proposal contradict PRINCIPLES?)
- Outputs execution order with safety gates between steps
- Generates `ARBITER_REPORT.md`

**Impact:** Very High â€” completes the triangle, creates true competitive moat
**Effort:** Medium â‰ˆ 1-2 days (skill definition + prompt engineering)
**Breaking:** ðŸŸ¢ Non-breaking â€” additive
**ROADMAP candidate:** Yes â†’ "Task 8: /arbiter skill" â€” PRIORITIZE

---

### P3.2: FILE PAIR MANIFEST â€” Single source for dual-structure sync

**Why:**
The dual-structure (dev â†” npm-templates) currently has 8+ file pairs hardcoded in 3 places:
1. `bin/cli.js` â€” files to copy at install
2. `scripts/install.sh` â€” files to copy at install
3. `scripts/pre-commit` â€” sync guard ignore list

Every new skill or rule file = manual update in 3 places. Already happened: arbiter.md was added to skills but someone must remember to update all 3 locations. Drift is guaranteed to occur as the project grows.

**What exactly:**
Create `manifest.json` (or `.ai/file-pairs.json`) listing all paired files:
```json
{
  "pairs": [
    [".claude/CLAUDE.md", "npm-templates/.claude/CLAUDE.md"],
    [".claude/commands/ctx.md", "npm-templates/.claude/commands/ctx.md"],
    [".claude/commands/sculptor.md", "npm-templates/.claude/commands/sculptor.md"],
    [".claude/commands/arbiter.md", "npm-templates/.claude/commands/arbiter.md"],
    ["AGENTS.md", "npm-templates/AGENTS.md"],
    [".cursor/rules/ai-workflow.mdc", "npm-templates/.cursor/rules/ai-workflow.mdc"],
    [".cursorrules", "npm-templates/.cursorrules"]
  ]
}
```

`bin/cli.js`, `install.sh`, and `pre-commit` all read from this manifest.

**Impact:** Medium-High â€” eliminates drift risk, single source of truth
**Effort:** Medium â‰ˆ 2-3h (refactor 3 files to read manifest)
**Breaking:** ðŸŸ¢ Non-breaking â€” same behavior, different source of truth
**ROADMAP candidate:** Yes â†’ "Task 15: File pair manifest" â€” do after /arbiter is finalized (file list will change)

---

## What NOT to Change

| What | Why to Keep |
|------|------------|
| **Dual-structure (dev â†” npm-templates)** | Fundamental distribution architecture. Coupling cost is justified. |
| **Skills triangle (/ctx + /sculptor)** | Core competitive differentiator. Don't add skills without clear need. |
| **@clack/prompts in cli.js** | Right choice. -44 packages. Don't switch. |
| **3-question wizard** | Hard-won simplification. Don't add questions back. |
| **presets.json as token source** | Clean, honest, session_limit only. Don't add prices back. |
| **Security guards** | pre-commit, forbidden-trackers.json, PII detection â€” essential. Don't cut security. |
| **PROJECT_IDEOLOGY.md** | New, just created. Let it settle. Don't refactor yet. |
| **"Less is more" philosophy** | Every time the project added more (10 rule files, 4 presets, 8 questions), it created debt. Keep trusting this principle. |

---

## Execution Order (for /arbiter)

```
PHASE 1 â€” Cleanup Sprint (~2h total, any order)
  P1.1  Scripts purge (24 files deleted)
  P1.2  config.json cleanup (3 fields removed)
  P1.3  Runtime files out of npm-templates (2 files deleted)
  P2.1  Delete QUICK_CONTEXT.md
  P2.2  CHANGELOG catch-up
  â†’ Single commit: "chore(cleanup): scripts purge + config cleanup + dead files"

PHASE 2 â€” Content Update (~1h)
  P2.3  AGENTS.md update
  â†’ Commit: "docs(agents): reflect current workflow + skills triangle"

PHASE 3 â€” Strategic (~1-2 days)
  P3.1  /arbiter skill implementation
  â†’ Commit: "feat(task-8): /arbiter skill â€” execution planner + safety gatekeeper"

PHASE 4 â€” Future-proofing (after arbiter)
  P3.2  File pair manifest
  â†’ Commit: "refactor: single manifest for dual-structure file pairs"
```

---

## Market Positioning Note

The WebSearch confirms: the space has many point tools but no "AI Workflow OS."
One sentence that should appear in README:

> "vibe-rules copies rules. agent-rules is a GitHub repo. We install discipline."

This sentence captures what makes us different â€” the non-rules layers (session protocol, token management, security hooks, ideology capture, skills triangle) that competitors don't have and can't easily copy.

---

*Next step: run `/arbiter` to get risk-scored execution plan for P1.1-P3.2*
